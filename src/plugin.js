"use strict";penpot.ui.open("Penpot path editor",`?theme=${penpot.theme}`,{width:800,height:600});let selectedContent="";penpot.ui.onMessage(e=>{switch(e.type){case"ready":selectPath(),initEvents();break;case"update-path":penpot.selection[0].content=e.content,selectedContent=penpot.selection[0].content;break;default:return}}),penpot.on("selectionchange",()=>{selectPath(),initEvents()});let listeners=[];function selectPath(){const e=penpot.selection[0];e?.type=="path"?sendMessage({type:"setpath",penpot_id:penpot.selection[0]?.id,content:e.toD()}):sendMessage({type:"setpath",penpot_id:null,content:""})}function initEvents(){listeners.forEach(e=>{penpot.off(e)}),listeners=penpot.selection.map(e=>penpot.on("shapechange",t=>{t.content!=selectedContent&&selectPath()},{shapeId:e.id}))}penpot.on("themechange",e=>{sendMessage({type:"theme",content:e})});function sendMessage(e){penpot.ui.sendMessage(e)}
